<main>
    <section>
        <logo size="48"/>
        <h1>Iniciar sesión</h1>
        @if (!valid) {
            <form [formGroup]="form">
                <div class="input bg-light2">
                    <label for="email"><i class="fi fi-rr-envelope"></i></label>
                    <input formControlName="email" id="email" type="email" placeholder="Correo electronico" />
                </div>
                <!-- ERRORES PARA EMAIL -->
                <notification text="El correo es obligatorio" [hidden]="!(getControlError('email', 'required') && form.get('email')?.dirty)" />
                <notification color="yellow" icon="envelope-ban" text="Correo invalido" [hidden]="!getControlError('email', 'email')" />
                <notification color="yellow" icon="circle-6" text="El correo debe contener minimo seis caracteres" [hidden]="!(getControlError('email', 'minlength') && !getControlError('email', 'email'))" />
                <notification text="No se encuentra este correo" [hidden]="!(unregisteredUserError)" />
                <div class="input bg-light2">
                    <label for="password"><i class="fi fi-rr-lock"></i></label>
                    <input formControlName="password" id="password" type="password" placeholder="Contraseña" />
                </div>
                <!-- ERRORES PARA CONTRASEÑA -->
                <notification text="Por favor rellena la contraseña" [hidden]="!(getControlError('password', 'required') && form.get('password')?.dirty)" />
                <notification color="yellow" icon="circle-6" text="La contraseña debe contener minimo seis caracteres" [hidden]="!getControlError('password', 'minlength')" />
                <notification text="Contraseña incorrecta, vuelve a intentarlo" [hidden]="!(incorrectPasswordError)" />
                <div class="controls">
                    <button (click)="signIn()" [disabled]="!form.valid" class="btn bg-green">Acceder</button>
                    <div>
                        <button [hidden]="!(hiddenHomeCookie())" (click)="redirectHome()" class="btn bg-purple"><i class="fi fi-rr-home"></i></button>
                        <button (click)="redirectSignUp()" class="btn bg-dark">Registrarse</button>
                    </div>
                </div>
            </form>
        } @else {
            <div class="loading">
                <loading text="Buscando" />
            </div>
        }
    </section>
</main>
